/*! YPlaylist 1.0.1 2013-08-23 */
var YPlaylist={init:function(a){this.protocol="auto"===a.secure?"https:"===window.location.protocol?"https://":"http://":a.secure?"https://":"http://",this.url=this.protocol+"gdata.youtube.com/feeds/api/playlists/"+a.playlist+"?v=2&max-results=50&alt=json&callback=?",this.container=a.container,this.secure=a.secure,this.shuffle=a.shuffle,this.fetch()},fetch:function(){var a=this,b=$('<div class="placeholder"></div>');$.getJSON(a.url,function(d){var e,f,g="",h={},i=d.feed.entry||[];for(a.shuffle&&i.sort(function(){return.5-Math.random()}),$(a.container).append(b),$(b).html(function(){var b=a.getId(i[0].link[0].href);return'<div id="youtube_conatiner"><iframe width="350" height="380" src="'+a.protocol+"www.youtube.com/embed/"+b+'" frameborder="0" allowfullscreen></iframe> </div>'}),e=0,f=i.length;f>e;e+=1)h={title:i[e].title.$t,url:i[e].link[0].href,thumb:i[e].media$group.media$thumbnail[1].url,desc:i[e].media$group.media$description.$t};a.carousel(),a.view($(".slider li"))})},truncate:function(a,b){var c;if(a.length>b){for(b--,c=a.substr(b-1,1);" "!==c&&b>0;)b--,c=a.substr(b-1,1);c=a.substr(b-2,1),a=","===c||";"===c||":"===c?a.substr(0,b-2)+"...":"."===c||"?"===c||"!"===c?a.substr(0,b-1):a.substr(0,b-1)+"..."}return a},getId:function(a){var b=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/,c=a.match(b);if(c&&11===c[2].length)return c[2];throw new Error("Invalid video URL")},view:function(a){var b=this;a.click(function(a){a.preventDefault();
$(this).hasClass("current")||($(".slider li").removeClass("current"),$(this).addClass("current"),$(".placeholder iframe").attr({src:b.protocol+"www.youtube.com/embed/"+b.getId(c)+"?autoplay=1"}),$(".placeholder h2").html(d),$("html, body").animate({scrollTop:$(".placeholder").offset().top},1e3))})},carousel:function(){var a=$(".slider"),b=$(".slider li").outerWidth(!0),c=0;$(".slider li:first").before($(".slider li:last")),$(document.body).on("click",".carousel-container .controll",function(){$(this).hasClass("next")?(c=parseInt(a.css("left"),10)-b,$(".slider:not(:animated)").animate({left:c},500,function(){$(".slider li:last").after($(".slider li:first")),$(".slider").css({left:"-"+b+"px"})})):(c=parseInt(a.css("left"),10)+b,$(".slider:not(:animated)").animate({left:c},500,function(){$(".slider li:first").before($(".slider li:last")),$(".slider").css({left:"-"+b+"px"})}))})}};